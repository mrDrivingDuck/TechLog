# Vert.x - Asynchronous & Non-blocking

Created by : Mr Dk.

2019 / 02 / 11 10:24

Longyou, Zhejiang, China

---

## Asynchronous & Synconronous

同步 I/O 模型和异步 I/O 模型的区别。

在 *POSIX* 定义中：

* 导致进程阻塞直到 I/O 完成的操作是同步 I/O
* 反之则是异步 I/O

## Blocking & Non-blocking

阻塞的定义：整个进程等待 I/O 完成。在此过程中进程不能做别的事情。

## Theory

I/O 过程分为两个阶段：

1. 数据准备阶段 (网络、磁盘、外设等) - 传输过程
2. 数据从内核空间复制到用户空间 - `read()` 调用等过程

###  Synchronous I/O

* 同步阻塞 - 第 `1` 步 **完成后** 才返回
* 同步非阻塞 - 第 `1` 步 **开始后** 即返回，但需要轮询第 `1` 步是否完成

但是第 `2` 步都需要进程主动完成，比如对 socket fd 调用 `read()`。

### Asynchronous I/O

在第 `1` 步 **开始后** 返回，在第 `2` 步 **完成后** 才提醒用户。

## Example

> 老张喜欢喝茶和看电视。
>
> * 同步阻塞：老张烧了一壶水泡茶，坐在壶前等水开了才能回去看电视
> * 同步非阻塞：老张把水烧上，然后去看电视，但是时不时需要去看看水开了没
> * 异步阻塞：老张买了个水开了自己会响的水壶，把水烧上，坐在壶前等水开 (sb 😓)
> * 异步非阻塞：老张把水烧上，去看电视；听到水壶响了以后再去处理开水

---

